 {% include 'dashboard/base.html' %}
 
 {% block content %}
   <div class="top_visual_frame_task_list_management"></div>
<div class="extreme_outer_div_task_manage_detail">  

   <div class="task_detail_left_panel_manage">
           

          <div class ="title_task_view">{{task.name}}</div>
          <div class="flex_container_task_view">Due date : {{task.due_date}} </div>
          <div class="flex_container_task_view">Took : {{task.completion_time}} h</div>
          <a onclick="document.getElementById('popup').style.display='flex'">
                <button class="task_detail_completed_link">Description  
              </button>
           </a>
            <a href="{% url 'dashboard:task_manage_update' task.id %}">
                <button class="task_detail_completed_link">More details  
              </button>
           </a>
                
          <div class="title_data">Team</div>
    

          <div class="left_bar_team_members_container">
              {% for user in task.users.all %}
              <div class="task_completed">{{user.user.username}}</div>
              {% endfor %}


            
              
          </div>
    
{% if task.content_type %}
   {% load static %}
<div class="images_title"> Images</div>
      <div class="image_container_task_review_detail">
        <img id="thumbnail_img_icon" style=" width: 28%; position: relative;" 
         src="{% static 'img_icon2.png' %}"
         onclick="showOverlay();">
          </div>
{% endif %}

     </div>

          <div class="text_frames_container_management">  
            

              <div class="title_completion_note"> 
          
                   Completion note 
               
              </div>
           
              <div class="second_text_container_management">
                  <p class="general_text_management2">  {{task.completion_note}}</p>
             </div>

          </div>    



 <div class="task_detail_right_panel">


    <div class="task_completed_btn_container">
         <a href="{% url 'dashboard:task_approve' task.id %}">
         <button type="button" class="task_detail_completed_btn">Approve</button>
        </a>
    </div>
 

    <div class="task_completed_deny_container">
           <form class="form_deny_text" method="post">
           {% csrf_token %}
           <button class="btn_deny" type="submit">Deny</button>
   </div> 

    <div class="task_completed_deny_container2"> 
           {{form.deny_reason.label_tag}}
           {{form.deny_reason}}
 
           </form>
    </div>    

</div>

 </div>
        <div class="send_msg_back">
          <a href="{% url 'dashboard:team_completed' %}"><button class="del_btn2" type="button">Back</button></a>

        </div>
   </div>

  {% if task.content_type %}
     <div id="overlay" class="overlay" style="display: none; text-align: center;"
     onclick="hideOverlay();">
    <img style="width:85%;margin-top: 5px; border:3px solid black;" 
         src="{% url 'dashboard:stream_completed_task_img' task.id %}">
  </div>
  {% endif %}
<div class="bot_visual_frame_task_list"></div>



<!--------------------------------------MODAL------------------------------------------->

                <div id="popup" style="
                  display: none;
                  position: absolute;
                  left: 50%;
                  top:50%;
                  transform: translate(-50%,-50%);
                  width: 100vw; height: 100vh;
                  background: rgba(0,0,0,0.5);
                  justify-content: center;
                  align-items: center;
                  z-index: 100;
                ">
                  <div style="
                     background-color: rgb(156, 129, 105);
                    width: 60vw; height: 81vh;
                    padding: 20px;
                    border-radius: 8px;
                    margin-top: 1%;
                    display: flex;
                    flex-direction: column;
                  ">
                  <div class="task_description_title_modal_manage">Description</div>
                  <p class="task_description_text_modal_manage">{{task.description}}</p>
             
                  <button class="task_modal_manage_btn" onclick="document.getElementById('popup').style.display='none'">Close</button>
               
            </div>





<script>


function showOverlay() {
    document.getElementById('overlay').style.display = 'block';
    document.getElementById('thumbnail').style.display = 'none';
}

function hideOverlay() {
    document.getElementById('overlay').style.display = 'none';
    document.getElementById('thumbnail').style.display = 'inline';
}
</script>



{% endblock %}